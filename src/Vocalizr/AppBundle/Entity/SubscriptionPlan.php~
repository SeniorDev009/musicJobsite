<?php
namespace Vocalizr\AppBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity(repositoryClass="Vocalizr\AppBundle\Repository\SubscriptionPlanRepository")
 * @ORM\HasLifecycleCallbacks()
 * @ORM\Table(name="subscription_plan")
 */
class SubscriptionPlan
{
    const PLAN_FREE = 'FREE';

    /**
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     * @ORM\Column(type="integer")
     */
    public $id;

    /**
     * @ORM\Column(type="string", length=32)
     */
    protected $title;

    /**
     * @ORM\Column(type="text")
     */
    protected $description;

    /**
     * @ORM\Column(type="integer", length=9)
     */
    protected $price;

    /**
     * Limit of audio files assigned to profile
     *
     * @ORM\Column(type="integer", length=2, nullable=true)
     */
    protected $user_audio_limit = null;

    /**
     * @ORM\Column(type="integer", length=9)
     */
    protected $project_percent_added = null;

    /**
     * @ORM\Column(type="integer", length=9)
     */
    protected $payment_percent_taken = null;

    /**
     * @ORM\Column(type="integer", length=9)
     */
    protected $project_private_fee = 5;

    /**
     * @ORM\Column(type="integer", length=9)
     */
    protected $project_highlight_fee = 10;

    /**
     * @ORM\Column(type="integer", length=9)
     */
    protected $project_feature_fee = 10;

    /**
     * @ORM\Column(type="integer", length=9)
     */
    protected $project_announce_fee = 10;

    /**
     * Connect limit
     * @ORM\Column(type="integer", length=3, options={"default":5})
     */
    protected $connect_month_limit = 5;
    
    /**
     * Message limit
     * @ORM\Column(type="integer", length=3, options={"default":5}, nullable=true)
     */
    protected $message_month_limit = 5;

    /**
     * @ORM\Column(type="string", length=32)
     */
    protected $static_key = null;

    /**
     * @ORM\Column(type="string", length=32)
     */
    protected $unique_key = null;

    /**
     * @ORM\Column(type="datetime", nullable=true)
     */
    protected $updated_at = null;

    /**
     * @ORM\Column(type="boolean")
     */
    protected $hidden = false;

    /**
     * @ORM\Column(type="datetime")
     */
    protected $created_at;

    /**
     * Relationships
     */

    /**
     * @ORM\OneToMany(targetEntity="UserSubscription", mappedBy="subscription_plan")
     */
    protected $user_subscription;


    /**
     * @ORM\PrePersist
     */
    public function prePersist()
    {
        $this->created_at = new \DateTime();
        $this->unique_key = md5(time()+rand(9,999999));

        $this->connect_daily_limit = 3;
    }

    /**
     * @ORM\PreUpdate
     */
    public function preUpdate()
    {
        $this->updated_at = new \DateTime();
    }

    /**
     * Get id
     *
     * @return integer
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set title
     *
     * @param string $title
     * @return SubscriptionPlan
     */
    public function setTitle($title)
    {
        $this->title = $title;

        return $this;
    }

    /**
     * Get title
     *
     * @return string
     */
    public function getTitle()
    {
        return $this->title;
    }

    /**
     * Set content
     *
     * @param string $content
     * @return SubscriptionPlan
     */
    public function setContent($content)
    {
        $this->content = $content;

        return $this;
    }

    /**
     * Get content
     *
     * @return string
     */
    public function getContent()
    {
        return $this->content;
    }

    /**
     * Set price
     *
     * @param integer $price
     * @return SubscriptionPlan
     */
    public function setPrice($price)
    {
        $this->price = $price;

        return $this;
    }

    /**
     * Get price
     *
     * @return integer
     */
    public function getPrice()
    {
        return $this->price;
    }

    /**
     * Get price
     *
     * @return float
     */
    public function getFloatPrice()
    {
        return (float) $this->price / 100;
    }


    /**
     * Constructor
     */
    public function __construct()
    {
        $this->user_subscription = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Set description
     *
     * @param string $description
     * @return SubscriptionPlan
     */
    public function setDescription($description)
    {
        $this->description = $description;

        return $this;
    }

    /**
     * Get description
     *
     * @return string
     */
    public function getDescription()
    {
        return $this->description;
    }

    /**
     * Set user_audio_limit
     *
     * @param integer $userAudioLimit
     * @return SubscriptionPlan
     */
    public function setUserAudioLimit($userAudioLimit)
    {
        $this->user_audio_limit = $userAudioLimit;

        return $this;
    }

    /**
     * Get user_audio_limit
     *
     * @return integer
     */
    public function getUserAudioLimit()
    {
        return $this->user_audio_limit;
    }

    /**
     * Set payment_percent_taken
     *
     * @param integer $paymentPercentTaken
     * @return SubscriptionPlan
     */
    public function setPaymentPercentTaken($paymentPercentTaken)
    {
        $this->payment_percent_taken = $paymentPercentTaken;

        return $this;
    }

    /**
     * Get payment_percent_taken
     *
     * @return integer
     */
    public function getPaymentPercentTaken()
    {
        return $this->payment_percent_taken;
    }

    /**
     * Set static_key
     *
     * @param string $staticKey
     * @return SubscriptionPlan
     */
    public function setStaticKey($staticKey)
    {
        $this->static_key = $staticKey;

        return $this;
    }

    /**
     * Get static_key
     *
     * @return string
     */
    public function getStaticKey()
    {
        return $this->static_key;
    }

    /**
     * Add user_subscription
     *
     * @param \Vocalizr\AppBundle\Entity\UserSubscription $userSubscription
     * @return SubscriptionPlan
     */
    public function addUserSubscription(\Vocalizr\AppBundle\Entity\UserSubscription $userSubscription)
    {
        $this->user_subscription[] = $userSubscription;

        return $this;
    }

    /**
     * Remove user_subscription
     *
     * @param \Vocalizr\AppBundle\Entity\UserSubscription $userSubscription
     */
    public function removeUserSubscription(\Vocalizr\AppBundle\Entity\UserSubscription $userSubscription)
    {
        $this->user_subscription->removeElement($userSubscription);
    }

    /**
     * Get user_subscription
     *
     * @return \Doctrine\Common\Collections\Collection
     */
    public function getUserSubscription()
    {
        return $this->user_subscription;
    }

    /**
     * Set unique_key
     *
     * @param string $uniqueKey
     * @return SubscriptionPlan
     */
    public function setUniqueKey($uniqueKey)
    {
        $this->unique_key = $uniqueKey;

        return $this;
    }

    /**
     * Get unique_key
     *
     * @return string
     */
    public function getUniqueKey()
    {
        return $this->unique_key;
    }

    /**
     * Set updated_at
     *
     * @param \DateTime $updatedAt
     * @return SubscriptionPlan
     */
    public function setUpdatedAt($updatedAt)
    {
        $this->updated_at = $updatedAt;

        return $this;
    }

    /**
     * Get updated_at
     *
     * @return \DateTime
     */
    public function getUpdatedAt()
    {
        return $this->updated_at;
    }

    /**
     * Set created_at
     *
     * @param \DateTime $createdAt
     * @return SubscriptionPlan
     */
    public function setCreatedAt($createdAt)
    {
        $this->created_at = $createdAt;

        return $this;
    }

    /**
     * Get created_at
     *
     * @return \DateTime
     */
    public function getCreatedAt()
    {
        return $this->created_at;
    }

    /**
     * Set hidden
     *
     * @param boolean $hidden
     * @return SubscriptionPlan
     */
    public function setHidden($hidden)
    {
        $this->hidden = $hidden;

        return $this;
    }

    /**
     * Get hidden
     *
     * @return boolean
     */
    public function getHidden()
    {
        return $this->hidden;
    }

    /**
     * Set project_percent_added
     *
     * @param integer $projectPercentAdded
     * @return SubscriptionPlan
     */
    public function setProjectPercentAdded($projectPercentAdded)
    {
        $this->project_percent_added = $projectPercentAdded;

        return $this;
    }

    /**
     * Get project_percent_added
     *
     * @return integer
     */
    public function getProjectPercentAdded()
    {
        return $this->project_percent_added;
    }

    /**
     * Set project_private_fee
     *
     * @param integer $projectPrivateFee
     * @return SubscriptionPlan
     */
    public function setProjectPrivateFee($projectPrivateFee)
    {
        $this->project_private_fee = $projectPrivateFee;

        return $this;
    }

    /**
     * Get project_private_fee
     *
     * @return integer
     */
    public function getProjectPrivateFee()
    {
        return $this->project_private_fee;
    }

    /**
     * Set project_highlight_fee
     *
     * @param integer $projectHighlightFee
     * @return SubscriptionPlan
     */
    public function setProjectHighlightFee($projectHighlightFee)
    {
        $this->project_highlight_fee = $projectHighlightFee;

        return $this;
    }

    /**
     * Get project_highlight_fee
     *
     * @return integer
     */
    public function getProjectHighlightFee()
    {
        return $this->project_highlight_fee;
    }

    /**
     * Set project_feature_fee
     *
     * @param integer $projectFeatureFee
     * @return SubscriptionPlan
     */
    public function setProjectFeatureFee($projectFeatureFee)
    {
        $this->project_feature_fee = $projectFeatureFee;

        return $this;
    }

    /**
     * Get project_feature_fee
     *
     * @return integer
     */
    public function getProjectFeatureFee()
    {
        return $this->project_feature_fee;
    }

    /**
     * Set project_announce_fee
     *
     * @param integer $projectAnnounceFee
     * @return SubscriptionPlan
     */
    public function setProjectAnnounceFee($projectAnnounceFee)
    {
        $this->project_announce_fee = $projectAnnounceFee;

        return $this;
    }

    /**
     * Get project_announce_fee
     *
     * @return integer
     */
    public function getProjectAnnounceFee()
    {
        return $this->project_announce_fee;
    }

    /**
     * Set message_month_limit
     *
     * @param integer $messageMonthLimit
     * @return SubscriptionPlan
     */
    public function setMessageMonthLimit($messageMonthLimit)
    {
        $this->message_month_limit = $messageMonthLimit;
    
        return $this;
    }

    /**
     * Get message_month_limit
     *
     * @return integer 
     */
    public function getMessageMonthLimit()
    {
        return $this->message_month_limit;
    }

    /**
     * Set connect_month_limit
     *
     * @param integer $connectMonthLimit
     * @return SubscriptionPlan
     */
    public function setConnectMonthLimit($connectMonthLimit)
    {
        $this->connect_month_limit = $connectMonthLimit;
    
        return $this;
    }

    /**
     * Get connect_month_limit
     *
     * @return integer 
     */
    public function getConnectMonthLimit()
    {
        return $this->connect_month_limit;
    }
}