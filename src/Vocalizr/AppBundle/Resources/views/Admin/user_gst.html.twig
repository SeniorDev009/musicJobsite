{% extends '@VocalizrApp/Admin/layout.html.twig' %}
{% block admin_scripts %}
    <script>
        VocalizrAdmin.initGstGigCommissions();
        VocalizrAdmin.initGstUpgrades();
        VocalizrAdmin.initGstSubscriptions();
        jQuery(document).ready(function($) {
            var currentUrl = document.location.toString();
            if (currentUrl.match('#')) {
                $('.nav-tabs a[href="#' + currentUrl.split('#')[1] + '"]').tab('show');
            } else {
                $('.nav-tabs a[href="#tab-gig-commissions"]').tab('show');
            }
        });
    </script>
{% endblock %}
{% block admin_content %}
    <h1>GST Calculations</h1>
    <div id="account-tabs" class="col-sm-12">
        <ul class="nav nav-tabs">
            <li><a href="#tab-gig-commissions" data-toggle="tab">Gig commissions</a></li>
            <li><a href="#tab-upgrades" data-toggle="tab">Upgrades</a></li>
            <li><a href="#tab-subscriptions" data-toggle="tab">Subscriptions</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane fade in" id="tab-gig-commissions">
                <div class="light-content">
                    <form id="gig-commissions-form" class="admin-search-form" action="{{ path('admin_gst_gig_commissions') }}">
                        <div class="form-group">
                            <label for="search-term">Search by year and quarter: </label><br>
                            <select class="form-control" name="year[]">
                                {% for year in years|reverse %}
                                    <option value="{{ year['year'] }}">{{ year['year'] }}</option>
                                {% endfor %}
                            </select><br>
                            <select class="form-control" name="quarter[]">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                            </select>
                        </div><br>
                        <button type="submit" class="btn btn-default" id="user-search-btn">Search</button>
                    </form>
                </div>
                <div id="gig-commissions" class="results-container">
                </div>
            </div>
            <div class="tab-pane fade in" id="tab-upgrades">
                <div class="light-content">
                    <form id="upgrades-form" class="admin-search-form" action="{{ path('admin_gst_upgrades') }}">
                        <div class="form-group">
                            <label for="search-term">Search by year and quarter: </label><br>
                            <select class="form-control" name="year[]">
                                {% for year in years|reverse %}
                                    <option value="{{ year['year'] }}">{{ year['year'] }}</option>
                                {% endfor %}
                            </select><br>
                            <select class="form-control" name="quarter[]">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                            </select>
                        </div><br>
                        <button type="submit" class="btn btn-default" id="user-search-btn">Search</button>
                    </form>
                </div>
                <div id="upgrades" class="results-container">
                </div>
            </div>
            <div class="tab-pane fade in" id="tab-subscriptions">
                <div class="light-content">
                    <form id="subscriptions-form" class="admin-search-form" action="{{ path('admin_gst_subscriptions') }}">
                        <div class="form-group">
                            <label for="search-term">Search by year and quarter: </label><br>
                            <select class="form-control" name="year[]">
                                {% for year in years|reverse %}
                                    <option value="{{ year['year'] }}">{{ year['year'] }}</option>
                                {% endfor %}
                            </select><br>
                            <select class="form-control" name="months[]">
                                {% for i in 1..12 %}
                                    <option value="{{ i }}">{{ i }}</option>
                                {% endfor %}
                            </select>
                        </div><br>
                        <button type="submit" class="btn btn-default" id="user-search-btn">Search</button>
                    </form>
                </div>
                <div id="subscriptions" class="results-container">
                </div>
            </div>
        </div>
    </div>
{% endblock %}