{% extends 'app.html.twig' %}

{% block title %}Admin{% endblock %}

{% block javascript %}
        <script type="text/javascript" src="{{ asset('js/admin.js') }}"></script>

        <script type="text/javascript">
            VocalizrDashboard.initDashboard();
        </script>
{% endblock %}


{% block body %}
    <div class="row">
        <div class="col-sm-2">
            <ul class="nav">
                {% include 'Admin/include/menu.html.twig' %}
            </ul>
        </div>
        <div class="col-sm-10 admin-dashboard">
            <h1>Dashboard</h1>
            <div class="stat"><strong>Total Users: </strong>{{ users }}</div>
            <div class="stat"><strong>Total Vocalists: </strong>{{ vocalists }}</div>
            <div class="stat"><strong>Total Producers: </strong>{{ producers }}</div>
            <div class="stat"><strong>Total PRO Users: </strong>{{ proUsers }}</div>
            <div class="stat"><strong>Total PRO Stripe: </strong>{{ proStripeUsers }}</div>
            <div class="stat"><strong>Total PRO Paypal: </strong>{{ proPaypalUsers }}</div>
            <div class="stat"><strong>Gigs Currently Published: </strong>{{ published_gigs }}</div>
            <div class="stat"><strong>Gigs in Studio: </strong>{{ gigs_in_studio }}</div>
            <hr>

            <div>
                Show
                <select id="stat-range">
                    <option value="day">Daily</option>
                    <option value="week" selected>Weekly</option>
                    <option value="month">Monthly</option>
                </select>
                stats from:
                <input type="date" id="stat-start-date" value="{{ startDate|date('Y-m-d') }}">
                to:
                <input type="date" id="stat-end-date" value="{{ endDate|date('Y-m-d') }}">
                <button id="stat-update-btn" class="btn">Update</button>
            </div>

            <div class="stats-filter">View statistics for:
                <select id="stat-category">
                    <option value="users">Users</option>
                    <option value="vocalists">Vocalists</option>
                    <option value="producers">Producers</option>
                    <option value="gigs">Gigs Created</option>
                    <option value="published_gigs">Gigs Published</option>
                    <option value="public_published_gigs">Public Gigs Published</option>
                    <option value="private_published_gigs">Private Gigs Published</option>
                    <option value="awarded_gigs">Awarded Gigs</option>
                    <option value="public_awarded_gigs">Public Gigs Awarded</option>
                    <option value="private_gigs">Private Gigs Awarded</option>
                    <option value="completed_gigs">Gigs Completed</option>
                    <option value="public_completed_gigs">Public Gigs Completed</option>
                    <option value="private_completed_gigs">Private Gigs Completed</option>
                    <option value="revenue">Revenue Earned</option>
                    <option value="bids">Bids Submitted</option>
                    <option value="messages">Messages Sent</option>
                </select>
            </div>

            <div id="stats-graph-container" data-url="{{ path('admin_stats') }}">
                <div class="loading-stats">Loading...</div>
            </div>
        </div>
    </div>
{% endblock %}
